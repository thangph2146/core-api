import { PrismaClient } from '@prisma/client';
import * as bcrypt from 'bcrypt';

const prisma = new PrismaClient();

async function main() {
  console.log('üóëÔ∏è  X√≥a t·∫•t c·∫£ d·ªØ li·ªáu c≈©...');
  
  // X√≥a d·ªØ li·ªáu theo th·ª© t·ª± ƒë·ªÉ tr√°nh l·ªói foreign key
  await prisma.blogComment.deleteMany();
  await prisma.blogBookmark.deleteMany();
  await prisma.blogLike.deleteMany();
  await prisma.blog.deleteMany();
  await prisma.jobApplication.deleteMany();
  await prisma.recruitment.deleteMany();
  await prisma.contactSubmission.deleteMany();
  await prisma.newsletterSubscription.deleteMany();
  await prisma.service.deleteMany();
  await prisma.media.deleteMany();
  await prisma.userProfile.deleteMany();
  await prisma.userSession.deleteMany();
  await prisma.session.deleteMany();
  await prisma.account.deleteMany();
  await prisma.user.deleteMany();
  await prisma.role.deleteMany();
  await prisma.permission.deleteMany();
  await prisma.tag.deleteMany();
  await prisma.status.deleteMany();
  await prisma.category.deleteMany();

  console.log('‚úÖ ƒê√£ x√≥a t·∫•t c·∫£ d·ªØ li·ªáu c≈©');

  console.log('üîë T·∫°o Permissions...');
  
  // T·∫°o permissions d·ª±a tr√™n schema
  const permissions = await Promise.all([
    // User Management
    prisma.permission.create({
      data: {
        name: 'user:create',
        description: 'T·∫°o ng∆∞·ªùi d√πng m·ªõi',
        metaTitle: 'Quy·ªÅn t·∫°o ng∆∞·ªùi d√πng',
        metaDescription: 'Cho ph√©p t·∫°o t√†i kho·∫£n ng∆∞·ªùi d√πng m·ªõi trong h·ªá th·ªëng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'user:read',
        description: 'Xem th√¥ng tin ng∆∞·ªùi d√πng',
        metaTitle: 'Quy·ªÅn xem ng∆∞·ªùi d√πng',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† th√¥ng tin chi ti·∫øt ng∆∞·ªùi d√πng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'user:update',
        description: 'C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a ng∆∞·ªùi d√πng',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n v√† c√†i ƒë·∫∑t ng∆∞·ªùi d√πng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'user:delete',
        description: 'X√≥a ng∆∞·ªùi d√πng',
        metaTitle: 'Quy·ªÅn x√≥a ng∆∞·ªùi d√πng',
        metaDescription: 'Cho ph√©p x√≥a t√†i kho·∫£n ng∆∞·ªùi d√πng kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Role Management
    prisma.permission.create({
      data: {
        name: 'role:create',
        description: 'T·∫°o vai tr√≤ m·ªõi',
        metaTitle: 'Quy·ªÅn t·∫°o vai tr√≤',
        metaDescription: 'Cho ph√©p t·∫°o c√°c vai tr√≤ v√† ph√¢n quy·ªÅn m·ªõi'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'role:read',
        description: 'Xem th√¥ng tin vai tr√≤',
        metaTitle: 'Quy·ªÅn xem vai tr√≤',
        metaDescription: 'Cho ph√©p xem danh s√°ch vai tr√≤ v√† quy·ªÅn h·∫°n'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'role:update',
        description: 'C·∫≠p nh·∫≠t vai tr√≤',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a vai tr√≤',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin v√† quy·ªÅn h·∫°n c·ªßa vai tr√≤'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'role:delete',
        description: 'X√≥a vai tr√≤',
        metaTitle: 'Quy·ªÅn x√≥a vai tr√≤',
        metaDescription: 'Cho ph√©p x√≥a vai tr√≤ kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Blog Management
    prisma.permission.create({
      data: {
        name: 'blog:create',
        description: 'T·∫°o b√†i vi·∫øt blog',
        metaTitle: 'Quy·ªÅn t·∫°o blog',
        metaDescription: 'Cho ph√©p t·∫°o v√† vi·∫øt b√†i blog m·ªõi'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'blog:read',
        description: 'Xem b√†i vi·∫øt blog',
        metaTitle: 'Quy·ªÅn xem blog',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† n·ªôi dung b√†i blog'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'blog:update',
        description: 'C·∫≠p nh·∫≠t b√†i vi·∫øt blog',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a blog',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a n·ªôi dung v√† th√¥ng tin b√†i blog'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'blog:delete',
        description: 'X√≥a b√†i vi·∫øt blog',
        metaTitle: 'Quy·ªÅn x√≥a blog',
        metaDescription: 'Cho ph√©p x√≥a b√†i vi·∫øt blog kh·ªèi h·ªá th·ªëng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'blog:publish',
        description: 'Xu·∫•t b·∫£n b√†i vi·∫øt blog',
        metaTitle: 'Quy·ªÅn xu·∫•t b·∫£n blog',
        metaDescription: 'Cho ph√©p xu·∫•t b·∫£n v√† h·ªßy xu·∫•t b·∫£n b√†i blog'
      }
    }),

    // Category Management
    prisma.permission.create({
      data: {
        name: 'category:create',
        description: 'T·∫°o danh m·ª•c',
        metaTitle: 'Quy·ªÅn t·∫°o danh m·ª•c',
        metaDescription: 'Cho ph√©p t·∫°o danh m·ª•c m·ªõi cho blog v√† d·ªãch v·ª•'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'category:read',
        description: 'Xem danh m·ª•c',
        metaTitle: 'Quy·ªÅn xem danh m·ª•c',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† chi ti·∫øt danh m·ª•c'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'category:update',
        description: 'C·∫≠p nh·∫≠t danh m·ª•c',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a danh m·ª•c',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin v√† c·∫•u tr√∫c danh m·ª•c'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'category:delete',
        description: 'X√≥a danh m·ª•c',
        metaTitle: 'Quy·ªÅn x√≥a danh m·ª•c',
        metaDescription: 'Cho ph√©p x√≥a danh m·ª•c kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Tag Management
    prisma.permission.create({
      data: {
        name: 'tag:create',
        description: 'T·∫°o th·∫ª tag',
        metaTitle: 'Quy·ªÅn t·∫°o tag',
        metaDescription: 'Cho ph√©p t·∫°o th·∫ª tag m·ªõi cho b√†i vi·∫øt'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'tag:read',
        description: 'Xem th·∫ª tag',
        metaTitle: 'Quy·ªÅn xem tag',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† th√¥ng tin th·∫ª tag'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'tag:update',
        description: 'C·∫≠p nh·∫≠t th·∫ª tag',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a tag',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin th·∫ª tag'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'tag:delete',
        description: 'X√≥a th·∫ª tag',
        metaTitle: 'Quy·ªÅn x√≥a tag',
        metaDescription: 'Cho ph√©p x√≥a th·∫ª tag kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Service Management
    prisma.permission.create({
      data: {
        name: 'service:create',
        description: 'T·∫°o d·ªãch v·ª•',
        metaTitle: 'Quy·ªÅn t·∫°o d·ªãch v·ª•',
        metaDescription: 'Cho ph√©p t·∫°o d·ªãch v·ª• m·ªõi'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'service:read',
        description: 'Xem d·ªãch v·ª•',
        metaTitle: 'Quy·ªÅn xem d·ªãch v·ª•',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† chi ti·∫øt d·ªãch v·ª•'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'service:update',
        description: 'C·∫≠p nh·∫≠t d·ªãch v·ª•',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a d·ªãch v·ª•',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin d·ªãch v·ª•'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'service:delete',
        description: 'X√≥a d·ªãch v·ª•',
        metaTitle: 'Quy·ªÅn x√≥a d·ªãch v·ª•',
        metaDescription: 'Cho ph√©p x√≥a d·ªãch v·ª• kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Media Management
    prisma.permission.create({
      data: {
        name: 'media:upload',
        description: 'T·∫£i l√™n media',
        metaTitle: 'Quy·ªÅn t·∫£i l√™n media',
        metaDescription: 'Cho ph√©p t·∫£i l√™n h√¨nh ·∫£nh v√† file media'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'media:read',
        description: 'Xem media',
        metaTitle: 'Quy·ªÅn xem media',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† chi ti·∫øt file media'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'media:update',
        description: 'C·∫≠p nh·∫≠t media',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a media',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin file media'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'media:delete',
        description: 'X√≥a media',
        metaTitle: 'Quy·ªÅn x√≥a media',
        metaDescription: 'Cho ph√©p x√≥a file media kh·ªèi h·ªá th·ªëng'
      }
    }),

    // Contact Management
    prisma.permission.create({
      data: {
        name: 'contact:read',
        description: 'Xem li√™n h·ªá',
        metaTitle: 'Quy·ªÅn xem li√™n h·ªá',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† chi ti·∫øt li√™n h·ªá t·ª´ kh√°ch h√†ng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'contact:respond',
        description: 'Ph·∫£n h·ªìi li√™n h·ªá',
        metaTitle: 'Quy·ªÅn ph·∫£n h·ªìi li√™n h·ªá',
        metaDescription: 'Cho ph√©p ph·∫£n h·ªìi v√† x·ª≠ l√Ω li√™n h·ªá t·ª´ kh√°ch h√†ng'
      }
    }),

    // Newsletter Management
    prisma.permission.create({
      data: {
        name: 'newsletter:read',
        description: 'Xem newsletter',
        metaTitle: 'Quy·ªÅn xem newsletter',
        metaDescription: 'Cho ph√©p xem danh s√°ch ƒëƒÉng k√Ω newsletter'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'newsletter:manage',
        description: 'Qu·∫£n l√Ω newsletter',
        metaTitle: 'Quy·ªÅn qu·∫£n l√Ω newsletter',
        metaDescription: 'Cho ph√©p qu·∫£n l√Ω danh s√°ch v√† g·ª≠i newsletter'
      }
    }),

    // Recruitment Management
    prisma.permission.create({
      data: {
        name: 'recruitment:create',
        description: 'T·∫°o tin tuy·ªÉn d·ª•ng',
        metaTitle: 'Quy·ªÅn t·∫°o tin tuy·ªÉn d·ª•ng',
        metaDescription: 'Cho ph√©p t·∫°o b√†i ƒëƒÉng tuy·ªÉn d·ª•ng m·ªõi'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'recruitment:read',
        description: 'Xem tin tuy·ªÉn d·ª•ng',
        metaTitle: 'Quy·ªÅn xem tin tuy·ªÉn d·ª•ng',
        metaDescription: 'Cho ph√©p xem danh s√°ch v√† chi ti·∫øt tin tuy·ªÉn d·ª•ng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'recruitment:update',
        description: 'C·∫≠p nh·∫≠t tin tuy·ªÉn d·ª•ng',
        metaTitle: 'Quy·ªÅn ch·ªânh s·ª≠a tin tuy·ªÉn d·ª•ng',
        metaDescription: 'Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin tin tuy·ªÉn d·ª•ng'
      }
    }),
    prisma.permission.create({
      data: {
        name: 'recruitment:delete',
        description: 'X√≥a tin tuy·ªÉn d·ª•ng',
        metaTitle: 'Quy·ªÅn x√≥a tin tuy·ªÉn d·ª•ng',
        metaDescription: 'Cho ph√©p x√≥a tin tuy·ªÉn d·ª•ng kh·ªèi h·ªá th·ªëng'
      }
    }),

    // System Admin
    prisma.permission.create({
      data: {
        name: 'system:admin',
        description: 'Qu·∫£n tr·ªã h·ªá th·ªëng',
        metaTitle: 'Quy·ªÅn qu·∫£n tr·ªã h·ªá th·ªëng',
        metaDescription: 'Quy·ªÅn cao nh·∫•t, c√≥ th·ªÉ truy c·∫≠p m·ªçi ch·ª©c nƒÉng c·ªßa h·ªá th·ªëng'
      }
    }),
  ]);

  console.log(`‚úÖ ƒê√£ t·∫°o ${permissions.length} permissions`);

  console.log('üëë T·∫°o Roles...');
  
  // T·∫°o roles
  const adminRole = await prisma.role.create({
    data: {
      name: 'Administrator',
      description: 'Qu·∫£n tr·ªã vi√™n c√≥ to√†n quy·ªÅn qu·∫£n l√Ω h·ªá th·ªëng',
      metaTitle: 'Vai tr√≤ Qu·∫£n tr·ªã vi√™n',
      metaDescription: 'Vai tr√≤ c√≥ quy·ªÅn cao nh·∫•t trong h·ªá th·ªëng, c√≥ th·ªÉ qu·∫£n l√Ω t·∫•t c·∫£ ch·ª©c nƒÉng',
      permissions: {
        connect: permissions.map(p => ({ id: p.id }))
      }
    }
  });

  const editorRole = await prisma.role.create({
    data: {
      name: 'Editor',
      description: 'Bi√™n t·∫≠p vi√™n qu·∫£n l√Ω n·ªôi dung blog v√† d·ªãch v·ª•',
      metaTitle: 'Vai tr√≤ Bi√™n t·∫≠p vi√™n',
      metaDescription: 'Vai tr√≤ chuy√™n qu·∫£n l√Ω n·ªôi dung, blog v√† d·ªãch v·ª• c·ªßa website',
      permissions: {
        connect: permissions.filter(p => 
          p.name.startsWith('blog:') ||
          p.name.startsWith('category:') ||
          p.name.startsWith('tag:') ||
          p.name.startsWith('service:') ||
          p.name.startsWith('media:')
        ).map(p => ({ id: p.id }))
      }
    }
  });

  const moderatorRole = await prisma.role.create({
    data: {
      name: 'Moderator',
      description: 'Ng∆∞·ªùi ki·ªÉm duy·ªát n·ªôi dung v√† qu·∫£n l√Ω li√™n h·ªá',
      metaTitle: 'Vai tr√≤ Ki·ªÉm duy·ªát vi√™n',
      metaDescription: 'Vai tr√≤ ki·ªÉm duy·ªát n·ªôi dung v√† x·ª≠ l√Ω li√™n h·ªá t·ª´ ng∆∞·ªùi d√πng',
      permissions: {
        connect: permissions.filter(p => 
          p.name.includes(':read') ||
          p.name.startsWith('contact:') ||
          p.name.startsWith('newsletter:') ||
          p.name === 'blog:update' ||
          p.name === 'blog:publish'
        ).map(p => ({ id: p.id }))
      }
    }
  });

  const userRole = await prisma.role.create({
    data: {
      name: 'User',
      description: 'Ng∆∞·ªùi d√πng th√¥ng th∆∞·ªùng',
      metaTitle: 'Vai tr√≤ Ng∆∞·ªùi d√πng',
      metaDescription: 'Vai tr√≤ c∆° b·∫£n cho ng∆∞·ªùi d√πng ƒëƒÉng k√Ω t√†i kho·∫£n',
      permissions: {
        connect: permissions.filter(p => 
          p.name === 'blog:read' ||
          p.name === 'service:read' ||
          p.name === 'category:read' ||
          p.name === 'tag:read'
        ).map(p => ({ id: p.id }))
      }
    }
  });

  console.log(`‚úÖ ƒê√£ t·∫°o 4 roles: Admin, Editor, Moderator, User`);

  console.log('üìä T·∫°o Status...');
  
  // T·∫°o status cho c√°c entities
  const statuses = await Promise.all([
    // Blog statuses
    prisma.status.create({
      data: {
        name: 'Draft',
        description: 'B√†i vi·∫øt ƒëang so·∫°n th·∫£o',
        type: 'blog',
        metaTitle: 'Tr·∫°ng th√°i B·∫£n nh√°p',
        metaDescription: 'B√†i vi·∫øt ƒëang ƒë∆∞·ª£c so·∫°n th·∫£o, ch∆∞a xu·∫•t b·∫£n'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Published',
        description: 'B√†i vi·∫øt ƒë√£ xu·∫•t b·∫£n',
        type: 'blog',
        metaTitle: 'Tr·∫°ng th√°i ƒê√£ xu·∫•t b·∫£n',
        metaDescription: 'B√†i vi·∫øt ƒë√£ ƒë∆∞·ª£c xu·∫•t b·∫£n v√† hi·ªÉn th·ªã c√¥ng khai'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Archived',
        description: 'B√†i vi·∫øt ƒë√£ l∆∞u tr·ªØ',
        type: 'blog',
        metaTitle: 'Tr·∫°ng th√°i L∆∞u tr·ªØ',
        metaDescription: 'B√†i vi·∫øt ƒë√£ ƒë∆∞·ª£c l∆∞u tr·ªØ, kh√¥ng hi·ªÉn th·ªã c√¥ng khai'
      }
    }),

    // Service statuses
    prisma.status.create({
      data: {
        name: 'Active',
        description: 'D·ªãch v·ª• ƒëang ho·∫°t ƒë·ªông',
        type: 'service',
        metaTitle: 'Tr·∫°ng th√°i Ho·∫°t ƒë·ªông',
        metaDescription: 'D·ªãch v·ª• ƒëang ƒë∆∞·ª£c cung c·∫•p'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Inactive',
        description: 'D·ªãch v·ª• t·∫°m ng∆∞ng',
        type: 'service',
        metaTitle: 'Tr·∫°ng th√°i T·∫°m ng∆∞ng',
        metaDescription: 'D·ªãch v·ª• t·∫°m th·ªùi ng∆∞ng cung c·∫•p'
      }
    }),

    // Contact statuses
    prisma.status.create({
      data: {
        name: 'New',
        description: 'Li√™n h·ªá m·ªõi',
        type: 'contact',
        metaTitle: 'Tr·∫°ng th√°i M·ªõi',
        metaDescription: 'Li√™n h·ªá m·ªõi ch∆∞a ƒë∆∞·ª£c x·ª≠ l√Ω'
      }
    }),
    prisma.status.create({
      data: {
        name: 'In Progress',
        description: 'ƒêang x·ª≠ l√Ω',
        type: 'contact',
        metaTitle: 'Tr·∫°ng th√°i ƒêang x·ª≠ l√Ω',
        metaDescription: 'Li√™n h·ªá ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Resolved',
        description: 'ƒê√£ gi·∫£i quy·∫øt',
        type: 'contact',
        metaTitle: 'Tr·∫°ng th√°i ƒê√£ gi·∫£i quy·∫øt',
        metaDescription: 'Li√™n h·ªá ƒë√£ ƒë∆∞·ª£c gi·∫£i quy·∫øt xong'
      }
    }),

    // Recruitment statuses
    prisma.status.create({
      data: {
        name: 'Open',
        description: 'ƒêang tuy·ªÉn d·ª•ng',
        type: 'recruitment',
        metaTitle: 'Tr·∫°ng th√°i ƒêang tuy·ªÉn',
        metaDescription: 'V·ªã tr√≠ ƒëang m·ªü ƒë·ªÉ tuy·ªÉn d·ª•ng'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Closed',
        description: 'ƒê√£ ƒë√≥ng tuy·ªÉn d·ª•ng',
        type: 'recruitment',
        metaTitle: 'Tr·∫°ng th√°i ƒê√£ ƒë√≥ng',
        metaDescription: 'V·ªã tr√≠ ƒë√£ ƒë√≥ng, kh√¥ng nh·∫≠n ·ª©ng vi√™n'
      }
    }),

    // Job Application statuses
    prisma.status.create({
      data: {
        name: 'Applied',
        description: 'ƒê√£ ·ª©ng tuy·ªÉn',
        type: 'application',
        metaTitle: 'Tr·∫°ng th√°i ƒê√£ ·ª©ng tuy·ªÉn',
        metaDescription: 'H·ªì s∆° ƒë√£ ƒë∆∞·ª£c n·ªôp'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Under Review',
        description: 'ƒêang xem x√©t',
        type: 'application',
        metaTitle: 'Tr·∫°ng th√°i ƒêang xem x√©t',
        metaDescription: 'H·ªì s∆° ƒëang ƒë∆∞·ª£c xem x√©t'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Accepted',
        description: 'ƒê∆∞·ª£c ch·∫•p nh·∫≠n',
        type: 'application',
        metaTitle: 'Tr·∫°ng th√°i ƒê∆∞·ª£c ch·∫•p nh·∫≠n',
        metaDescription: 'H·ªì s∆° ƒë∆∞·ª£c ch·∫•p nh·∫≠n'
      }
    }),
    prisma.status.create({
      data: {
        name: 'Rejected',
        description: 'B·ªã t·ª´ ch·ªëi',
        type: 'application',
        metaTitle: 'Tr·∫°ng th√°i B·ªã t·ª´ ch·ªëi',
        metaDescription: 'H·ªì s∆° b·ªã t·ª´ ch·ªëi'
      }
    }),
  ]);

  console.log(`‚úÖ ƒê√£ t·∫°o ${statuses.length} statuses`);

  console.log('üìÇ T·∫°o Categories...');
  
  // T·∫°o categories
  const categories = await Promise.all([
    // Blog categories
    prisma.category.create({
      data: {
        name: 'C√¥ng ngh·ªá',
        slug: 'cong-nghe',
        description: 'C√°c b√†i vi·∫øt v·ªÅ c√¥ng ngh·ªá, l·∫≠p tr√¨nh, AI',
        type: 'blog',
        metaTitle: 'Danh m·ª•c C√¥ng ngh·ªá',
        metaDescription: 'T·ªïng h·ª£p c√°c b√†i vi·∫øt v·ªÅ c√¥ng ngh·ªá m·ªõi, l·∫≠p tr√¨nh v√† tr√≠ tu·ªá nh√¢n t·∫°o'
      }
    }),
    prisma.category.create({
      data: {
        name: 'Kinh doanh',
        slug: 'kinh-doanh',
        description: 'C√°c b√†i vi·∫øt v·ªÅ kinh doanh, kh·ªüi nghi·ªáp, marketing',
        type: 'blog',
        metaTitle: 'Danh m·ª•c Kinh doanh',
        metaDescription: 'Chia s·∫ª kinh nghi·ªám kinh doanh, kh·ªüi nghi·ªáp v√† chi·∫øn l∆∞·ª£c marketing'
      }
    }),
    prisma.category.create({
      data: {
        name: 'ƒê·ªùi s·ªëng',
        slug: 'doi-song',
        description: 'C√°c b√†i vi·∫øt v·ªÅ cu·ªôc s·ªëng, s·ª©c kh·ªèe, du l·ªãch',
        type: 'blog',
        metaTitle: 'Danh m·ª•c ƒê·ªùi s·ªëng',
        metaDescription: 'Nh·ªØng c√¢u chuy·ªán v·ªÅ cu·ªôc s·ªëng, m·∫πo s·ª©c kh·ªèe v√† tr·∫£i nghi·ªám du l·ªãch'
      }
    }),

    // Service categories
    prisma.category.create({
      data: {
        name: 'Ph√°t tri·ªÉn Web',
        slug: 'phat-trien-web',
        description: 'D·ªãch v·ª• thi·∫øt k·∫ø v√† ph√°t tri·ªÉn website',
        type: 'service',
        metaTitle: 'D·ªãch v·ª• Ph√°t tri·ªÉn Web',
        metaDescription: 'Cung c·∫•p d·ªãch v·ª• thi·∫øt k·∫ø, ph√°t tri·ªÉn website chuy√™n nghi·ªáp'
      }
    }),
    prisma.category.create({
      data: {
        name: '·ª®ng d·ª•ng Mobile',
        slug: 'ung-dung-mobile',
        description: 'D·ªãch v·ª• ph√°t tri·ªÉn ·ª©ng d·ª•ng di ƒë·ªông',
        type: 'service',
        metaTitle: 'D·ªãch v·ª• ·ª®ng d·ª•ng Mobile',
        metaDescription: 'Ph√°t tri·ªÉn ·ª©ng d·ª•ng iOS, Android chuy√™n nghi·ªáp'
      }
    }),
    prisma.category.create({
      data: {
        name: 'T∆∞ v·∫•n IT',
        slug: 'tu-van-it',
        description: 'D·ªãch v·ª• t∆∞ v·∫•n c√¥ng ngh·ªá th√¥ng tin',
        type: 'service',
        metaTitle: 'D·ªãch v·ª• T∆∞ v·∫•n IT',
        metaDescription: 'T∆∞ v·∫•n gi·∫£i ph√°p c√¥ng ngh·ªá th√¥ng tin cho doanh nghi·ªáp'
      }
    }),

    // Recruitment categories
    prisma.category.create({
      data: {
        name: 'IT - Ph·∫ßn m·ªÅm',
        slug: 'it-phan-mem',
        description: 'V·ªã tr√≠ tuy·ªÉn d·ª•ng trong lƒ©nh v·ª±c IT v√† ph·∫ßn m·ªÅm',
        type: 'recruitment',
        metaTitle: 'Tuy·ªÉn d·ª•ng IT - Ph·∫ßn m·ªÅm',
        metaDescription: 'C√°c v·ªã tr√≠ vi·ªác l√†m trong lƒ©nh v·ª±c c√¥ng ngh·ªá th√¥ng tin v√† ph·∫ßn m·ªÅm'
      }
    }),
    prisma.category.create({
      data: {
        name: 'Marketing - Sales',
        slug: 'marketing-sales',
        description: 'V·ªã tr√≠ tuy·ªÉn d·ª•ng Marketing v√† B√°n h√†ng',
        type: 'recruitment',
        metaTitle: 'Tuy·ªÉn d·ª•ng Marketing - Sales',
        metaDescription: 'C∆° h·ªôi ngh·ªÅ nghi·ªáp trong lƒ©nh v·ª±c marketing v√† b√°n h√†ng'
      }
    }),
    prisma.category.create({
      data: {
        name: 'Thi·∫øt k·∫ø - S√°ng t·∫°o',
        slug: 'thiet-ke-sang-tao',
        description: 'V·ªã tr√≠ tuy·ªÉn d·ª•ng Thi·∫øt k·∫ø v√† S√°ng t·∫°o',
        type: 'recruitment',
        metaTitle: 'Tuy·ªÉn d·ª•ng Thi·∫øt k·∫ø - S√°ng t·∫°o',
        metaDescription: 'Vi·ªác l√†m d√†nh cho c√°c nh√† thi·∫øt k·∫ø v√† ng∆∞·ªùi s√°ng t·∫°o'
      }
    }),
  ]);

  console.log(`‚úÖ ƒê√£ t·∫°o ${categories.length} categories`);

  console.log('üè∑Ô∏è T·∫°o Tags...');
  
  // T·∫°o tags
  const tags = await Promise.all([
    prisma.tag.create({
      data: {
        name: 'JavaScript',
        slug: 'javascript',
        metaTitle: 'Tag JavaScript',
        metaDescription: 'B√†i vi·∫øt v·ªÅ ng√¥n ng·ªØ l·∫≠p tr√¨nh JavaScript'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'React',
        slug: 'react',
        metaTitle: 'Tag React',
        metaDescription: 'Th∆∞ vi·ªán React cho ph√°t tri·ªÉn giao di·ªán ng∆∞·ªùi d√πng'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'Node.js',
        slug: 'nodejs',
        metaTitle: 'Tag Node.js',
        metaDescription: 'N·ªÅn t·∫£ng Node.js cho ph√°t tri·ªÉn backend'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'TypeScript',
        slug: 'typescript',
        metaTitle: 'Tag TypeScript',
        metaDescription: 'Ng√¥n ng·ªØ TypeScript m·ªü r·ªông t·ª´ JavaScript'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'AI',
        slug: 'ai',
        metaTitle: 'Tag AI',
        metaDescription: 'Tr√≠ tu·ªá nh√¢n t·∫°o v√† machine learning'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'Startup',
        slug: 'startup',
        metaTitle: 'Tag Startup',
        metaDescription: 'Kh·ªüi nghi·ªáp v√† x√¢y d·ª±ng doanh nghi·ªáp'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'Marketing',
        slug: 'marketing',
        metaTitle: 'Tag Marketing',
        metaDescription: 'Chi·∫øn l∆∞·ª£c v√† k·ªπ thu·∫≠t marketing'
      }
    }),
    prisma.tag.create({
      data: {
        name: 'Design',
        slug: 'design',
        metaTitle: 'Tag Design',
        metaDescription: 'Thi·∫øt k·∫ø UI/UX v√† ƒë·ªì h·ªça'
      }
    }),
  ]);

  console.log(`‚úÖ ƒê√£ t·∫°o ${tags.length} tags`);

  console.log('üë§ T·∫°o User ch√≠nh...');
  
  // Hash password cho user ch√≠nh
  const hashedPassword = await bcrypt.hash('RachelCu.26112020', 10);
  
  // T·∫°o user ch√≠nh
  const mainUser = await prisma.user.create({
    data: {
      email: 'thang.ph2146@gmail.com',
      name: 'Ph·∫°m Ho√†ng Th·∫Øng',
      hashedPassword: hashedPassword,
      emailVerified: new Date(),
      roleId: adminRole.id,
      metaTitle: 'Qu·∫£n tr·ªã vi√™n ch√≠nh',
      metaDescription: 'T√†i kho·∫£n qu·∫£n tr·ªã vi√™n ch√≠nh c·ªßa h·ªá th·ªëng',
      avatarUrl: 'https://ui-avatars.com/api/?name=Pham+Hoang+Thang&background=6366f1&color=ffffff&size=200',
      profile: {
        create: {
          bio: 'Qu·∫£n tr·ªã vi√™n h·ªá th·ªëng v√† nh√† ph√°t tri·ªÉn full-stack v·ªõi h∆°n 5 nƒÉm kinh nghi·ªám trong lƒ©nh v·ª±c c√¥ng ngh·ªá.',
          avatarUrl: 'https://ui-avatars.com/api/?name=Pham+Hoang+Thang&background=6366f1&color=ffffff&size=200',
          socialLinks: {
            github: 'https://github.com/thangph',
            linkedin: 'https://linkedin.com/in/thangph',
            facebook: 'https://facebook.com/thangph2146'
          },
          metaTitle: 'Profile Ph·∫°m Ho√†ng Th·∫Øng',
          metaDescription: 'Th√¥ng tin c√° nh√¢n c·ªßa qu·∫£n tr·ªã vi√™n h·ªá th·ªëng'
        }
      }
    }
  });

  console.log(`‚úÖ ƒê√£ t·∫°o user ch√≠nh: ${mainUser.email}`);

  console.log('üë• T·∫°o m·ªôt s·ªë User m·∫´u...');
  
  // T·∫°o m·ªôt s·ªë user m·∫´u
  const sampleUsers = await Promise.all([
    prisma.user.create({
      data: {
        email: 'editor@example.com',
        name: 'Nguy·ªÖn VƒÉn Bi√™n',
        hashedPassword: await bcrypt.hash('editor123', 10),
        emailVerified: new Date(),
        roleId: editorRole.id,
        avatarUrl: 'https://ui-avatars.com/api/?name=Nguyen+Van+Bien&background=10b981&color=ffffff&size=200',
        profile: {
          create: {
            bio: 'Bi√™n t·∫≠p vi√™n chuy√™n v·ªÅ n·ªôi dung c√¥ng ngh·ªá v√† kinh doanh.',
            avatarUrl: 'https://ui-avatars.com/api/?name=Nguyen+Van+Bien&background=10b981&color=ffffff&size=200',
            socialLinks: {
              twitter: 'https://twitter.com/nguyenvanbien',
              linkedin: 'https://linkedin.com/in/nguyenvanbien'
            }
          }
        }
      }
    }),
    prisma.user.create({
      data: {
        email: 'moderator@example.com',
        name: 'Tr·∫ßn Th·ªã Ki·ªÉm',
        hashedPassword: await bcrypt.hash('moderator123', 10),
        emailVerified: new Date(),
        roleId: moderatorRole.id,
        avatarUrl: 'https://ui-avatars.com/api/?name=Tran+Thi+Kiem&background=f59e0b&color=ffffff&size=200',
        profile: {
          create: {
            bio: 'Ki·ªÉm duy·ªát vi√™n n·ªôi dung v√† qu·∫£n l√Ω c·ªông ƒë·ªìng.',
            avatarUrl: 'https://ui-avatars.com/api/?name=Tran+Thi+Kiem&background=f59e0b&color=ffffff&size=200'
          }
        }
      }
    }),
    prisma.user.create({
      data: {
        email: 'user@example.com',
        name: 'L√™ VƒÉn D√πng',
        hashedPassword: await bcrypt.hash('user123', 10),
        emailVerified: new Date(),
        roleId: userRole.id,
        avatarUrl: 'https://ui-avatars.com/api/?name=Le+Van+Dung&background=8b5cf6&color=ffffff&size=200',
        profile: {
          create: {
            bio: 'Ng∆∞·ªùi d√πng th√¥ng th∆∞·ªùng quan t√¢m ƒë·∫øn c√¥ng ngh·ªá.',
            avatarUrl: 'https://ui-avatars.com/api/?name=Le+Van+Dung&background=8b5cf6&color=ffffff&size=200'
          }
        }
      }
    }),
  ]);

  console.log(`‚úÖ ƒê√£ t·∫°o ${sampleUsers.length} user m·∫´u`);

  console.log('üåü Ho√†n th√†nh seed database!');
  console.log('\nüìã T√≥m t·∫Øt d·ªØ li·ªáu ƒë√£ t·∫°o:');
  console.log(`- ${permissions.length} Permissions`);
  console.log(`- 4 Roles (Admin, Editor, Moderator, User)`);
  console.log(`- ${statuses.length} Statuses`);
  console.log(`- ${categories.length} Categories`);
  console.log(`- ${tags.length} Tags`);
  console.log(`- ${sampleUsers.length + 1} Users`);
  console.log('\nüîë Th√¥ng tin ƒëƒÉng nh·∫≠p:');
  console.log('üìß Email: thang.ph2146@gmail.com');
  console.log('üîí Password: RachelCu.26112020');
  console.log('üëë Role: Administrator');
}

main()
  .catch((e) => {
    console.error('‚ùå L·ªói khi seed database:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
